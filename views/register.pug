extends layout/default.pug
block previte-head
  link(rel="stylesheet" href="/dist/css/register.css")
  script.
    require(['/dist/customerjs/pages/register.js'])
block content
  .page-register#page-register
    //- .box1(data-bind="text: mobile, visible: false") xxxxxxxxx
    .i-step
      .active
        span 1
        label 手机验证
      div
        b
        span 2
        label 填写企业信息
      div
        b
        span 3
        label 注册成功
    ul.register-form-box
      //- 手机验证
      li.register-step1.register_cont_yz(data-bind="css: {active: step()=='1', finish: step()*1 > 1}")
        .sms-step
          .sms-step-item.register_cont_number(data-bind="css: {active: smsStep()=='1'}")
            .error-msg(data-bind="css: { show: errorMsg1()}")
              span.icon
                img(src='/img/icon/error.svg', alt='')
              span(data-bind="text: errorMsg1")
            .register_cont_number
              input(placeholder='请输入手机号' data-bind="textInput: mobile")
            .register_cont_click
              button(data-bind="click: smsStepNext") 点击按钮进行验证
          .sms-step-item(data-bind="css: {active: smsStep()=='2'}")
            .prevent-robot-wrapper
              #captcha(style='position: relative')
          .sms-step-item.register_cont_click(data-bind="css: {active: smsStep()=='3'}")
            .error-msg(data-bind="css: {show: !!smsCodeValidErrMsg()}")
              span.icon
                img(src='/img/icon/error.svg', alt='')
              span(data-bind="text: smsCodeValidErrMsg")
            .register_cont_number
              input(type='text' readonly placeholder='请输入手机号' data-bind="value: mobile")
            .register_cont_click_yz
              .click_yz_yz(data-bind="visible: isShowSMScodeInput()")
                div
                  input(type='text', placeholder='手机验证码' data-bind="textInput: code")
                div
                  button(data-bind="text: secondsLeft() + 's后重新获取',visible: !sendEnable()")
                  button.click_yz_cx(data-bind="css:{show: sendEnable}") 重新获取
              .click_yz_text(style="display:none" data-bind="visible: isSendSmsSuccess") 校验码短信已发送到你的手机上，有效时间为10分钟，请及时查收。
            button.i-button(data-bind="click: smsStepNext") 下一步
          //- 输入密码
          .sms-step-item.register_cont_pw
            .login_right_hint.login_right_w
              span
                img(src='/img/icon/error.svg', alt='')
              span {{ errors.first('password') }}
            p
              input(placeholder='请输入密码')
            p
              input(placeholder='确定密码')
            // 下一步按钮
            button.i-button
              | 下一步
      //- 填写企业信息
      li.register-step2.register_cont_xx(data-bind="css: {active: step()=='2', finish: step()*1 > 2}")
        .error-msg(style="width:372px; margin:0 auto 20px;" data-bind="css: { show: errorMsg2()}")
              span.icon
                img(src='/img/icon/error.svg', alt='')
              span(data-bind="text: errorMsg2")
        p
          input(type='text' placeholder='请输入企业名称' data-bind="textInput: company_name")
        p
          input(type='text', placeholder='请输入组织机构代码' data-bind="textInput: company_org_code")
        p
          textarea(cols='30', rows='6', placeholder='请输入您的icon地址' data-bind="textInput: eth_address")
        //- 下一步按钮
        button.i-button(data-bind="click: stepNext")
          | 下一步
      //- 注册完成
      li.register-step3.register_cont_wc(data-bind="css: {active: step()=='3', finish: step()*1 == 3}")
        div
          img(src='/img/icon/succeed.svg', alt='')
        div 恭喜您，注册成功！
        .register_next
          nuxt-link(to='/login')
            button.i-button 完成


